---
title: Conex√µes (n8n)
sidebarTitle: Conex√µes
description: 'Integra√ß√£o com n8n para agentes de IA e automa√ß√µes'
---

<Note>Este m√≥dulo √© exclusivo do **Plano Pro**.</Note>

Transforme o zNyx em um gateway para automa√ß√µes externas. Conecte seus canais a fluxos inteligentes, bancos de dados ou agentes de IA.

## üì° `/conexao`
<span className="api-method-tag post">PRO</span>

Gerencia a ponte entre canais de texto do Discord e Webhooks externos (n8n).

### Subcomandos

| Subcomando | Descri√ß√£o |
| :--- | :--- |
| `adicionar` | Cria uma nova conex√£o monitorada em um canal. |
| `remover` | Encerra a conex√£o e para de enviar dados. |
| `listar` | Exibe todas as conex√µes ativas no servidor. |
| `configurar` | Exibe o tutorial r√°pido e schema JSON. |

### Argumentos (Adicionar)

| Op√ß√£o | Tipo | Obrigatoriedade | Descri√ß√£o |
| :--- | :--- | :--- | :--- |
| `canal` | Canal (#) | **Obrigat√≥rio** | O canal de texto que ser√° monitorado. |
| `webhook` | Link (URL) | **Obrigat√≥rio** | URL do Webhook do n8n (M√©todo POST). |
| `modo` | Sele√ß√£o | **Obrigat√≥rio** | Define o gatilho de envio (ver abaixo). |

**Modos de Opera√ß√£o:**
* `Todas as mensagens`: Envia tudo o que √© falado. Ideal para logs, auditoria ou IAs que leem contexto geral.
* `Apenas men√ß√µes`: Envia apenas quando marcam o bot. Ideal para Chatbots de suporte direto.

---

## ‚öôÔ∏è Guia de Integra√ß√£o: n8n

Para criar seus agentes de IA, siga esta configura√ß√£o exata no n8n.

### 1. Recebendo Dados (Webhook Node)

Configure o n√≥ **Webhook** no n8n para receber as mensagens do zNyx:

| Configura√ß√£o | Valor |
| :--- | :--- |
| **Webhook Path** | Livre (use um c√≥digo seguro/dif√≠cil) |
| **Method** | `POST` |
| **Authentication** | `None` |
| **Respond** | `Immediately` |

<Warning>
**Importante!** O modo `Immediately` √© essencial para evitar timeout no Discord.
</Warning>

**Payload Recebido (JSON):**

O zNyx enviar√° a seguinte estrutura para o seu webhook:

```json
{
  "messageId": "123456789...",
  "userId": "987654321...",
  "username": "NomeDoUsuario",
  "displayName": "ApelidoNoServidor",
  "content": "Texto da mensagem enviada",
  "channelId": "ID do Canal",
  "guildId": "ID do Servidor",
  "timestamp": "ISO Date",
  "attachments": []
}
```

---

### 2. Enviando Respostas

Existem duas formas de devolver a resposta para o Discord:

<Tabs>
  <Tab title="Via Webhook (Simples)">

Mais r√°pido de configurar, mas a mensagem aparece como um "Bot Webhook" gen√©rico.

**N√≥:** HTTP Request
| Configura√ß√£o | Valor |
| :--- | :--- |
| **Method** | `POST` |
| **URL** | Cole o Webhook do Canal Discord |
| **Authentication** | `None` |
| **Send Body** | Ativado (`JSON`) |

**JSON:**
```json
{ "content": "Resposta do agente" }
```

<Info>
**Como criar o Webhook:** V√° em `Config. do Canal` ‚Üí `Integra√ß√µes` ‚Üí `Webhooks` ‚Üí `Novo`.
</Info>

  </Tab>
  <Tab title="Como o Bot (Recomendado)">

Mant√©m a identidade do bot e permite usar "Reply" (citar mensagem).

**N√≥:** Discord
| Configura√ß√£o | Valor |
| :--- | :--- |
| **Connection Type** | `Bot Token` |
| **Credential** | Configure o Token do seu Bot |
| **Resource** | `Message` |
| **Operation** | `Send` |
| **Send To** | `Channel` |
| **Channel** | Use a express√£o `{{ $json.channelId }}` |
| **Message** | O texto da resposta do agente |

**Para dar Reply (Citar a mensagem original):**
1. V√° em `Options` ‚Üí `Add Option` ‚Üí `Message to Reply to`
2. Use a express√£o: `{{ $json.body.messageId }}`

  </Tab>
</Tabs>
