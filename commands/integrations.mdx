---
title: Integra√ß√µes e Utilit√°rios
sidebarTitle: Integra√ß√µes
description: 'Automa√ß√£o avan√ßada com n8n e T√≥picos'
---

<Note>Este m√≥dulo √© exclusivo do **Plano Pro**.</Note>

Transforme o zNyx em um gateway para automa√ß√µes externas. Conecte seus canais a fluxos inteligentes, bancos de dados ou agentes de IA.

## üì° `/conexao`
<span className="api-method-tag post">PRO</span>

Gerencia a ponte entre canais de texto do Discord e Webhooks externos (n8n).

### Subcomandos
| Subcomando | Descri√ß√£o |
| :--- | :--- |
| `adicionar` | Cria uma nova conex√£o monitorada em um canal. |
| `remover` | Encerra a conex√£o e para de enviar dados. |
| `listar` | Exibe todas as conex√µes ativas no servidor. |
| `configurar` | Exibe o tutorial r√°pido e schema JSON. |

### Argumentos (Adicionar)
| Op√ß√£o | Tipo | Obrigatoriedade | Descri√ß√£o |
| :--- | :--- | :--- | :--- |
| `canal` | Canal (#) | **Obrigat√≥rio** | O canal de texto que ser√° monitorado. |
| `webhook` | Link (URL) | **Obrigat√≥rio** | URL do Webhook do n8n (M√©todo POST). |
| `modo` | Sele√ß√£o | **Obrigat√≥rio** | Define o gatilho de envio (ver abaixo). |

**Modos de Opera√ß√£o:**
* `Todas as mensagens`: Envia tudo o que √© falado. Ideal para logs, auditoria ou IAs que leem contexto geral.
* `Apenas men√ß√µes`: Envia apenas quando marcam o bot. Ideal para Chatbots de suporte direto.

---

## ‚öôÔ∏è Guia de Configura√ß√£o: n8n

Para integrar com sucesso, configure seu workflow no n8n seguindo exatamente os par√¢metros abaixo.

### 1. Recebendo Dados (Webhook Node)
No n8n, adicione um n√≥ **Webhook** e configure:

* **Webhook Path:** (Livre, ex: `chat-ia`)
* **Method:** `POST`
* **Authentication:** `None`
* **Respond:** `Immediately` <Warning>Essencial para evitar timeout no Discord.</Warning>

**Payload Recebido (JSON):**
O zNyx enviar√° a seguinte estrutura para o seu webhook:

``` json
{
  "messageId": "123456789...",
  "userId": "987654321...",
  "username": "NomeDoUsuario",
  "displayName": "ApelidoNoServidor",
  "content": "Texto da mensagem enviada",
  "channelId": "ID do Canal",
  "guildId": "ID do Servidor",
  "timestamp": "ISO Date",
  "attachments": []
}
```

---

### 2. Enviando a Resposta
Existem duas formas de responder ao usu√°rio no Discord.

#### Op√ß√£o A: Responder via Webhook (Simples)
Mais r√°pido, mas a mensagem aparece como um "Bot Webhook" gen√©rico se n√£o configurado.
1.  Crie um Webhook no Discord: `Config. do Canal` ‚Üí `Integra√ß√µes` ‚Üí `Webhooks`.
2.  No n8n, use o n√≥ **HTTP Request**:
    * **Method:** `POST`
    * **URL:** (Cole a URL do Webhook do Discord)
    * **Authentication:** `None`
    * **Send Query Parameters:** `Desativado`
    * **Send Body:** `Ativado`
    * **Body Content Type:** `JSON`
    * **Specify Body:** `Using JSON`
    * **JSON:** ```` json { "content": "Sua resposta aqui" } ````

#### Op√ß√£o B: Responder como zNyx (Recomendado)
Permite usar o recurso de "Reply" (responder marcando a mensagem original) e mant√©m a identidade do bot.
1.  No n8n, use o n√≥ **Discord**:
    * **Connection Type:** `Bot Token`
    * **Credential:** (Seu Token do Bot)
    * **Resource:** `Message`
    * **Operation:** `Send`
    * **Server:** (Selecione o Servidor) or use Expression
    * **Send To:** `Channel`
    * **Channel:** Use express√£o `{{ $json.channelId }}`
    * **Message:** O texto da resposta do seu agente.

**Para dar Reply (Citar a mensagem do usu√°rio):**
* V√° em `Options` ‚Üí `Add Option` ‚Üí `Message to Reply to`.
* Use a express√£o: `{{ $json.body.messageId }}`

---

## üí¨ `/topicos`
<span className="api-method-tag post">PRO</span>

Utilit√°rio de organiza√ß√£o que transforma mensagens comuns em t√≥picos (Threads).

* **Ativar:** O bot converte automaticamente qualquer nova mensagem do canal em um t√≥pico.
* **Desativar:** Para a automa√ß√£o.

**Casos de Uso:**
* Canais de **M√≠dia/Clips**: Permite coment√°rios sem poluir o feed principal.
* Canais de **Apresenta√ß√£o**: Mant√©m a apresenta√ß√£o em destaque e as boas-vindas dentro da thread.
* Canais de **D√∫vidas da Comunidade**: Organiza cada pergunta em uma discuss√£o isolada.